<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<div th:replace="fragments/menuTemplate :: menuHead"></div>

<body>
<div th:replace="fragments/menuTemplate :: menuBody"></div>
<div class="main-container">
    <div class="row m-0 bg-primary fixed-top myNav">
        <div class="col-md-6 border-bottom border-primary p-0 bg-primary d-flex justify-content-start align-items-center">
            <h3 class="fw-bold text-white mx-4 my-3">Ajuste primera vez</h3>
        </div>
    </div>
    <div id="content">
        <div class="row mt-4">
            <div class="text-left pr-3 col-md-12 my-2">
                <form enctype="multipart/form-data" id="fileUploadForm" method="post"
                      th:action="@{/ifrs9/firstAdjustment/upload}">
                    <div class="form-group my-3">
                        <label>Cargar archivo: </label> <input accept=".txt" class="custom-file-control" id="file"
                                                               name="file" required type="file">
                        <button class="btn btn-primary" type="submit">Cargar</button>
                    </div>
                </form>
            </div>
            <div class="col-md-12">
                <div class="table-responsive rounded border-primary">
                    <table class="table table-striped table-hover text-center table-bordered" id="example" width="100%">
                        <thead class="bg-primary">
                        <tr>
                            <th>Cuenta</th>
                            <th>Centro</th>
                            <th>Importe Pesos Debe</th>
                            <th>Importe Pesos Haber</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="adj : ${allFirst}">
                            <td th:text="${adj[0]}"></td>
                            <td th:text="${adj[1]}"></td>
                            <td th:text="${#numbers.formatDecimal(adj[2],1,'POINT',2,'COMMA')}"></td>
                            <td th:text="${#numbers.formatDecimal(adj[3],1,'POINT',2,'COMMA')}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row" th:if="${last != 0}">
                    <div class="col-md-4 text-left">
                        <nav arial-label="Pagination">
                            <ul class="pagination">
                                <li class="page-item" th:classappend="${prev == 0 ? 'disabled' : ''}">
                                    <a class="page-link"
                                       th:href="@{/ifrs9/{dir}/?page={page}(page=${prev},dir=${directory})}">Anterior</a>
                                </li>
                                <li class="page-item" th:classappend="${current == last ? 'disabled' : ''}">
                                    <a class="page-link"
                                       th:href="@{/ifrs9/{dir}/?page={page}(page=${next},dir=${directory})}">Siguiente</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="col-md-4 text-center">
                        <h6 th:utext="${registers} + ' Registros Encontrados'"></h6>
                    </div>
                    <div class="col-md-4 text-right">
                        <h6 class="mx-1" th:utext="'Página ' + ${current} + ' de ' + ${last}"></h6>
                    </div>
                </div>
                <div class="pr-3 col-md-12 my-2">
                    <div class="d-flex align-items-center justify-content-center">
                        <a class="btn btn-large btn-primary mx-1" href="#exportModal" data-toggle="modal" role="button">Exportar Tabla</a>
                        <a class="btn btn-large btn-primary mx-1" th:href="@{/ifrs9/firstAdjustment/download}">Exportar Resumen</a>
                    </div>
                </div>
                <div class="modal fade" id="exportModal">
                    <div class="modal-dialog rounded-1 modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <form method="get" th:action="@{/ifrs9/firstAdjustment/downloadDinamic}">
                                <div class="modal-header bg-primary text-light">
                                    <h4 class="modal-title">Exportar Ajuste Primera Vez</h4>
                                    <button aria-hidden="true" class="close" data-dismiss="modal" type="button">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row text-center">
                                        <h5 class="fw-bold">Seleccione los filtros</h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-text">
                                                <label for="empresa" class="col-form-label">Empresa:</label>
                                                <input type="text" class="form-control" id="empresa" th:name="empresa">
                                            </div>
                                            <div class="form-text">
                                                <label for="aplicativo" class="col-form-label">Aplicativo:</label>
                                                <input type="text" class="form-control" id="aplicativo" th:name="aplicativo">
                                            </div>
                                            <div class="form-text">
                                                <label for="centro_operante" class="col-form-label">Centro Operante:</label>
                                                <input type="text" class="form-control" id="centro_operante" th:name="centro_operante">
                                            </div>
                                            <div class="form-text">
                                                <label for="contrato" class="col-form-label">Contrato:</label>
                                                <input type="text" class="form-control" id="contrato" th:name="contrato">
                                            </div>
                                            <div class="form-text">
                                                <label for="centro_destino" class="col-form-label">Centro Destino:</label>
                                                <input type="text" class="form-control" id="centro_destino" th:name="centro_destino">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-text">
                                                <label for="cuenta" class="col-form-label">Cuenta:</label>
                                                <input type="text" class="form-control" id="cuenta" th:name="cuenta">
                                            </div>
                                            <div class="form-text">
                                                <label for="cuenta-gasto" class="col-form-label">Cuenta Gasto:</label>
                                                <input type="text" class="form-control" id="cuenta-gasto" th:name="cuenta_gasto">
                                            </div>
                                            <div class="form-text">
                                                <label for="cuenta-ingreso" class="col-form-label">Cuenta Ingreso:</label>
                                                <input type="text" class="form-control" id="cuenta-ingreso" th:name="cuenta_ingreso">
                                            </div>
                                            <div class="form-text">
                                                <label for="descripcion" class="col-form-label">Descripción:</label>
                                                <input type="text" class="form-control" id="descripcion" th:name="descripcion">
                                            </div>
                                            <div class="form-text">
                                                <label for="centro_origen" class="col-form-label">Centro Origen:</label>
                                                <input type="text" class="form-control" id="centro_origen" th:name="centro_origen">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-text">
                                                <label for="ristra" class="col-form-label">Ristra:</label>
                                                <input type="text" class="form-control" id="ristra" th:name="ristra">
                                            </div>
                                            <div class="form-text">
                                                <label for="correctora" class="col-form-label">Correctora:</label>
                                                <input type="text" class="form-control" id="correctora" th:name="correctora">
                                            </div>
                                            <div class="form-text">
                                                <label for="referencia" class="col-form-label">Referencia:</label>
                                                <input type="text" class="form-control" id="referencia" th:name="referencia">
                                            </div>
                                            <div class="form-text">
                                                <label for="clave_de_interfaz" class="col-form-label">Clave de Interfaz:</label>
                                                <input type="text" class="form-control" id="clave_de_interfaz" th:name="clave_de_interfaz">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-text">
                                                <label for="codigo_de_consolidacion" class="col-form-label">Código consolidación:</label>
                                                <input type="text" class="form-control" id="codigo_de_consolidacion" th:name="codigo_de_consolidacion">
                                            </div>
                                            <div class="form-text">
                                                <label for="ceros" class="col-form-label">Ceros:</label>
                                                <input type="text" class="form-control" id="ceros" th:name="ceros">
                                            </div>
                                            <div class="form-text">
                                                <label for="segmento" class="col-form-label">Segmento:</label>
                                                <input type="text" class="form-control" id="segmento" th:name="segmento">
                                            </div>
                                            <div class="form-text">
                                                <label for="stage" class="col-form-label">Stage:</label>
                                                <input type="text" class="form-control" id="stage" th:name="stage">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer d-flex justify-content-center">
                                    <button class="btn btn-primary" type="submit">Exportar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
    var queryString = window.location.search;
    var urlParams = new URLSearchParams(queryString);
    var respuesta = urlParams.get('resp');
    var row = urlParams.get('row');
    var column = urlParams.get('colum');
    validateAlerts(respuesta, row, column);
</script>
</body>

</html>